<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Local Database</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
        input, select, button {
            margin: 10px 0;
            padding: 8px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>Search Local Database</h1>
    
    <!-- Drop-down menu for selecting the column -->
    <label for="searchColumn">Select Column:</label>
    <select id="searchColumn">
        <option value="Item Name">Item Name</option>
        <option value="Location">Location</option>
        <option value="Purchase Quantity">Purchase Quantity</option>
        <option value="Sale Quantity">Sale Quantity</option>
    </select>
    
    <!-- Search box and buttons -->
    <input type="text" id="searchBox" placeholder="Search...">
    <button id="searchButton">Search</button>
    <button id="clearButton">Clear</button>

    <!-- Table to display results -->
    <table id="dataTable">
        <thead>
            <tr>
                <th>Item Name</th>
                <th>Location</th>
                <th>Purchase Quantity</th>
                <th>Sale Quantity</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        // URL of the JSON file in your GitHub repository
        const URL = 'https://raw.githubusercontent.com/YOUR_USERNAME/YOUR_REPO_NAME/main/database.json';

        // Fetch data from the JSON file
        async function fetchData() {
            const response = await fetch(URL);
            const data = await response.json();
            return data;
        }

        // Display data in the table
        function displayData(data) {
            const tableBody = document.querySelector('#dataTable tbody');
            tableBody.innerHTML = ''; // Clear previous data

            data.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${row['Item Name']}</td>
                    <td>${row['Location']}</td>
                    <td>${row['Purchase Quantity']}</td>
                    <td>${row['Sale Quantity']}</td>
                `;
                tableBody.appendChild(tr);
            });
        }

        // Search function
        function search(data) {
            const searchColumn = document.getElementById('searchColumn').value;
            const searchValue = document.getElementById('searchBox').value.toLowerCase();
            const filteredData = data.filter(row => 
                row[searchColumn].toLowerCase().includes(searchValue)
            );
            return filteredData;
        }

        // Event listeners
        document.getElementById('searchButton').addEventListener('click', async () => {
            const allData = await fetchData();
            const filteredData = search(allData);
            displayData(filteredData);
        });

        document.getElementById('clearButton').addEventListener('click', async () => {
            document.getElementById('searchBox').value = '';
            const allData = await fetchData();
            displayData(allData);
        });

        // Load all data initially
        (async () => {
            const allData = await fetchData();
            displayData(allData);
        })();
    </script>
</body>
</html>
